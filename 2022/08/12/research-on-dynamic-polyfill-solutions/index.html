<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Rspress v1.15.0"><title data-rh="true">动态polyfill方案调研 - SumyBlog</title><meta data-rh="true" name="description" content="SumyGG&#x27;s Blog"/><meta data-rh="true" name="referrer" content="no-referrer-when-downgrade"/><link data-rh="true" rel="alternate" type="application/rss+xml" href="https://sumygg.com/rss/feed.rss"/>
<script id="check-dark-light">
;(() => {
  const saved = localStorage.getItem('rspress-theme-appearance')
  const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
  if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
    document.documentElement.classList.add('dark')
  }
})()
</script>
<title>SumyBlog</title><link rel="icon" href="/favicon.ico"><script defer="defer" src="/static/js/styles.df47b71a.js"></script><script defer="defer" src="/static/js/lib-lodash.b329996d.js"></script><script defer="defer" src="/static/js/lib-polyfill.6c0e3b15.js"></script><script defer="defer" src="/static/js/lib-react.1a4d633b.js"></script><script defer="defer" src="/static/js/lib-router.345150bc.js"></script><script defer="defer" src="/static/js/4051.e82f0025.js"></script><script defer="defer" src="/static/js/index.e31e71f4.js"></script><link href="/static/css/styles.fb4df59b.css" rel="stylesheet"><script async src="https://www.googletagmanager.com/gtag/js?id=G-2NDCXW15G4"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2NDCXW15G4")</script><link href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" rel="stylesheet" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" crossorigin="anonymous"></script></head><body ><div id="root"><div><div><div class="navContainer_f6cde sticky rspress-nav px-6 "><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a href="/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>SumyBlog</span></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">搜索...</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/blog/flinks/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">友情链接</div></a><a class="link_03735  cursor-pointer" target="" href="/blog/archives/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">归档</div></a><a class="link_03735  cursor-pointer" target="" href="/blog/categories/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">分类</div></a><a class="link_03735  cursor-pointer" target="" href="/blog/tags/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">标签</div></a><a class="link_03735  cursor-pointer" target="" href="/about/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">关于我</div></a></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/sumy7/" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a><a href="https://weibo.com/sumy7" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="iconify iconify--ri" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M17.525 11.378c1.263.392 2.669 1.336 2.669 3.004c0 2.763-3.98 6.239-9.964 6.239c-4.565 0-9.23-2.213-9.23-5.852c0-1.902 1.204-4.102 3.277-6.177c2.773-2.77 6.004-4.033 7.219-2.816c.537.537.588 1.464.244 2.572c-.178.557.525.25.525.25c2.24-.938 4.196-.994 4.909.027c.38.543.343 1.306-.008 2.19c-.163.407.048.471.36.563zm-7.282 7.939c3.641-.362 6.401-2.592 6.167-4.983c-.237-2.391-3.382-4.038-7.023-3.677c-3.64.36-6.403 2.59-6.167 4.98c.237 2.394 3.382 4.039 7.023 3.68zM6.16 14.438c.754-1.527 2.712-2.39 4.446-1.94c1.793.463 2.707 2.154 1.976 3.8c-.744 1.682-2.882 2.578-4.695 1.993c-1.752-.566-2.493-2.294-1.727-3.853zm1.446 2.587c.568.257 1.325.013 1.676-.55c.346-.568.163-1.217-.407-1.459c-.563-.237-1.291.008-1.64.553c-.354.547-.189 1.202.371 1.456zm2.206-1.808c.219.092.501-.012.628-.231c.123-.22.044-.466-.178-.548c-.216-.084-.486.018-.613.232c-.123.214-.054.458.163.547zM19.873 9.5a.725.725 0 1 1-1.378-.451a1.38 1.38 0 0 0-.288-1.357a1.395 1.395 0 0 0-1.321-.425a.723.723 0 1 1-.303-1.416a2.836 2.836 0 0 1 3.29 3.649zm-3.916-6.575A5.831 5.831 0 0 1 21.5 4.72a5.836 5.836 0 0 1 1.22 5.704a.838.838 0 0 1-1.06.54a.844.844 0 0 1-.542-1.062a4.143 4.143 0 0 0-4.807-5.327a.845.845 0 0 1-.354-1.65z"></path></svg></div></a><a href="https://twitter.com/sumygg" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"></path></svg></div></a></div><div class="md:ml-1 p-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/flinks/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">友情链接</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/archives/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">归档</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/categories/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">分类</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/tags/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">标签</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/about/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">关于我</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/sumy7/" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a><a href="https://weibo.com/sumy7" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="iconify iconify--ri" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M17.525 11.378c1.263.392 2.669 1.336 2.669 3.004c0 2.763-3.98 6.239-9.964 6.239c-4.565 0-9.23-2.213-9.23-5.852c0-1.902 1.204-4.102 3.277-6.177c2.773-2.77 6.004-4.033 7.219-2.816c.537.537.588 1.464.244 2.572c-.178.557.525.25.525.25c2.24-.938 4.196-.994 4.909.027c.38.543.343 1.306-.008 2.19c-.163.407.048.471.36.563zm-7.282 7.939c3.641-.362 6.401-2.592 6.167-4.983c-.237-2.391-3.382-4.038-7.023-3.677c-3.64.36-6.403 2.59-6.167 4.98c.237 2.394 3.382 4.039 7.023 3.68zM6.16 14.438c.754-1.527 2.712-2.39 4.446-1.94c1.793.463 2.707 2.154 1.976 3.8c-.744 1.682-2.882 2.578-4.695 1.993c-1.752-.566-2.493-2.294-1.727-3.853zm1.446 2.587c.568.257 1.325.013 1.676-.55c.346-.568.163-1.217-.407-1.459c-.563-.237-1.291.008-1.64.553c-.354.547-.189 1.202.371 1.456zm2.206-1.808c.219.092.501-.012.628-.231c.123-.22.044-.466-.178-.548c-.216-.084-.486.018-.613.232c-.123.214-.054.458.163.547zM19.873 9.5a.725.725 0 1 1-1.378-.451a1.38 1.38 0 0 0-.288-1.357a1.395 1.395 0 0 0-1.321-.425a.723.723 0 1 1-.303-1.416a2.836 2.836 0 0 1 3.29 3.649zm-3.916-6.575A5.831 5.831 0 0 1 21.5 4.72a5.836 5.836 0 0 1 1.22 5.704a.838.838 0 0 1-1.06.54a.844.844 0 0 1-.542-1.062a4.143 4.143 0 0 0-4.807-5.327a.845.845 0 0 1-.354-1.65z"></path></svg></div></a><a href="https://twitter.com/sumygg" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"></path></svg></div></a></div><div class="md:ml-1 p-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></div></div></div></div><button aria-label="mobile hamburger" class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full flex-1"><div><div class="rspress-doc"><!--$--><h1 id="动态polyfill方案调研" class="text-3xl mb-10 leading-10 tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#动态polyfill方案调研">#</a>动态polyfill方案调研</h1><div class="postInfoContainer_07bfd -mt-5 mb-8"><span class="postInfoMetaItem_07bfd"><iconify-icon icon="{&quot;body&quot;:&quot;&lt;path fill=\&quot;currentColor\&quot; d=\&quot;M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5h16V4H0V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5z\&quot;/&gt;&quot;}" inline="true"></iconify-icon> <!-- -->2022-08-13</span><span class="postInfoMetaItem_07bfd"><iconify-icon icon="{&quot;body&quot;:&quot;&lt;path fill=\&quot;currentColor\&quot; d=\&quot;M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z\&quot;/&gt;&quot;}" inline="true"></iconify-icon> <a class="link_03735  cursor-pointer" target="" href="/blog/categories/index.html?category=前端">前端</a></span><span class="postInfoMetaItem_07bfd"><iconify-icon icon="{&quot;body&quot;:&quot;&lt;path fill=\&quot;currentColor\&quot; d=\&quot;M2 1a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7-7A1 1 0 0 0 6.586 1H2zm4 3.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0z\&quot;/&gt;&quot;}" inline="true"></iconify-icon> <a class="link_03735  cursor-pointer" target="" href="/blog/tags/index.html?tag=polyfill">polyfill</a></span><span class="postInfoMetaItem_07bfd"><iconify-icon icon="{&quot;body&quot;:&quot;&lt;path fill=\&quot;currentColor\&quot; d=\&quot;M2 1a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7-7A1 1 0 0 0 6.586 1H2zm4 3.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0z\&quot;/&gt;&quot;}" inline="true"></iconify-icon> <a class="link_03735  cursor-pointer" target="" href="/blog/tags/index.html?tag=webview">webview</a></span><span class="postInfoMetaItem_07bfd"><iconify-icon icon="{&quot;body&quot;:&quot;&lt;path fill=\&quot;currentColor\&quot; d=\&quot;M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM5.485 6.879l1.036 4.144l.997-3.655a.5.5 0 0 1 .964 0l.997 3.655l1.036-4.144a.5.5 0 0 1 .97.242l-1.5 6a.5.5 0 0 1-.967.01L8 9.402l-1.018 3.73a.5.5 0 0 1-.967-.01l-1.5-6a.5.5 0 1 1 .97-.242z\&quot;/&gt;&quot;}" inline="true"></iconify-icon> <!-- -->1.9k<!-- --> 字</span><span class="postInfoMetaItem_07bfd"><iconify-icon icon="{&quot;body&quot;:&quot;&lt;path fill=\&quot;currentColor\&quot; d=\&quot;M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z\&quot;/&gt;&quot;}" inline="true"></iconify-icon> <!-- -->6<!-- --> 分钟</span><span class="postInfoMetaItem_07bfd"><iconify-icon icon="{&quot;body&quot;:&quot;&lt;g fill=\&quot;currentColor\&quot;&gt;&lt;path d=\&quot;M10.5 8a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0z\&quot;/&gt;&lt;path d=\&quot;M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7z\&quot;/&gt;&lt;/g&gt;&quot;}" inline="true"></iconify-icon> </span></div>
<h2 id="什么是polyfill" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#什么是polyfill">#</a>什么是polyfill</h2>
<p class="my-4 leading-7">简单来说，polyfill是为了<strong class="font-semibold">抹平不同浏览器的api之间的差异</strong>。使我们在开发的过程中不需要过多关注浏览器版本之间的差异。</p>
<p class="my-4 leading-7"><img alt="CanIUse allSettled" src="/static/image/caniuse-allsettled.dd9b0592.png"/></p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://caniuse.com/mdn-javascript_builtins_promise_allsettled" class="link-_707cf  link_3b154 inline-link_3b154">https://caniuse.com/mdn-javascript_builtins_promise_allsettled</a></p>
<p class="my-4 leading-7">一个语言需要不断发展，语言的不同阶段会产生差异。需要抹平不同浏览器的差异主要来自以下几个方面：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">JavaScript语言层面的差异。JS也在不断发展，不同阶段提出了不同的API。为了在旧浏览器上能够使用新版的API，就需要进行polyfill。</li>
<li class="[&amp;:not(:first-child)]:mt-2">不同浏览器版本之间的差异。如IE和Chrome不同内核的差异，Chrome和Chrome不同版本的差异。DOM API、HTML5等特性的实现不同，就需要进行polyfill。</li>
</ol>
<h2 id="抹平不同浏览器的api差异" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#抹平不同浏览器的api差异">#</a>抹平不同浏览器的API差异</h2>
<p class="my-4 leading-7">要使代码抹平不同浏览器的API差异、兼容低版本浏览器，主要从以下几方面入手：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">不同浏览器内核 =&gt; 判断+转换成统一方法。不同浏览器内核的API方法有些许不同，可以判断浏览器内核转化成统一的方法调用。</li>
</ol>
<p class="my-4 leading-7"><img alt="CanIUse addEventListener" src="/static/image/caniuse-addeventlistener.db2342c1.png"/></p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://caniuse.com/addeventlistener" class="link-_707cf  link_3b154 inline-link_3b154">https://caniuse.com/addeventlistener</a></p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// 添加事件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-function)">addEvent</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">obj</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> type</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> fn</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>addEventListener</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">addEventListener</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>type</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> fn</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">else</span><span> </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>attachEvent</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">attachEvent</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;on&#x27;</span><span> </span><span class="token operator">+</span><span> type</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> fn</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// 移除事件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-function)">removeEvent</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">obj</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> type</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> fn</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>removeEventListener</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">removeEventListener</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>type</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> fn</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token boolean">false</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">else</span><span> </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>detachEvent</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        obj</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">detachEvent</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;on&#x27;</span><span> </span><span class="token operator">+</span><span> type</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> fn</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<ol start="2" class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">新语法、语法糖 =&gt; 转换成兼容代码。新语法无法直接在旧版浏览器中执行，只能对其进行等义转换。</li>
</ol>
<p class="my-4 leading-7">以运算符 <code>??</code> 为例：</p>
<p class="my-4 leading-7"><img alt="CanIUse ??" src="/static/image/caniuse-operators-nullish-coalescing.f98e9469.png"/></p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://caniuse.com/mdn-javascript_operators_nullish_coalescing" class="link-_707cf  link_3b154 inline-link_3b154">https://caniuse.com/mdn-javascript_operators_nullish_coalescing</a></p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// 原始代码</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> a </span><span class="token operator">=</span><span> </span><span class="token number">1</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> b </span><span class="token operator">=</span><span> </span><span class="token number">2</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> x </span><span class="token operator">=</span><span> a </span><span class="token operator">??</span><span> b
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// 转换后代码</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> a </span><span class="token operator">=</span><span> </span><span class="token number">1</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> b </span><span class="token operator">=</span><span> </span><span class="token number">2</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> x </span><span class="token operator">=</span><span> a </span><span class="token operator">!==</span><span> </span><span class="token" style="color:var(--code-token-keyword)">null</span><span> </span><span class="token operator">&amp;&amp;</span><span> a </span><span class="token operator">!==</span><span> </span><span class="token" style="color:var(--code-token-keyword)">void</span><span> </span><span class="token number">0</span><span> </span><span class="token operator">?</span><span> a </span><span class="token operator">:</span><span> b</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://www.typescriptlang.org/play?#code/MYewdgzgLgBAhjAvDAjAKFJWAjJMBMG40MAHnggPyUzZA" class="link-_707cf  link_3b154 inline-link_3b154">https://www.typescriptlang.org/play?#code/MYewdgzgLgBAhjAvDAjAKFJWAjJMBMG40MAHnggPyUzZA</a></p>
<p class="my-4 leading-7">这类转换一般通过babel插件进行。
babel插件在打包的时候会根据package.json配置的环境范围对不兼容的语言进行转换。当然tsc也有对应的功能，它主要是读取tsconfig.json中配置的target确定需要转换语法的范围。</p>
<ol start="3" class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">新对象、新方法 =&gt; 补丁代码进行补充。后续浏览器更新会增加新方法，或者增加新对象。可以通过添加补丁代码的方式进行兼容。这类做法就是我们常说的polyfill。</li>
</ol>
<p class="my-4 leading-7">以Promise.any为例</p>
<p class="my-4 leading-7"><img alt="CanIUse Promise.all" src="/static/image/caniuse-promise-all.1458bae4.png"/></p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://caniuse.com/mdn-javascript_builtins_promise_any" class="link-_707cf  link_3b154 inline-link_3b154">https://caniuse.com/mdn-javascript_builtins_promise_any</a></p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">/* global AggregateError, CreateMethodProperty, IterableToList, Promise, Type */</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-comment)">// Based on https://github.com/es-shims/Promise.any/blob/master/implementation.js</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> </span><span class="token function-variable" style="color:var(--code-token-function)">identity</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">x</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> x</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-function)">CreateMethodProperty</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>Promise</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;any&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-function)">any</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">iterable</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> </span><span class="token" style="color:var(--code-token-constant)">C</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">this</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-function)">Type</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-constant)">C</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">!==</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;object&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-keyword)">throw</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">TypeError</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;`this` value must be an object&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> arr</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>Array</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">isArray</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>iterable</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        arr </span><span class="token operator">=</span><span> iterable</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">else</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-keyword)">try</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                                arr </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">IterableToList</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>iterable</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">catch</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>_error</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                                </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> Promise</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">reject</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">TypeError</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;Argument of Promise.any is not iterable&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> </span><span class="token function-variable" style="color:var(--code-token-function)">thrower</span><span> </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">value</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token" style="color:var(--code-token-constant)">C</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">reject</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>value</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> promises </span><span class="token operator">=</span><span> arr</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">map</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">promise</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> itemPromise </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-constant)">C</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">resolve</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>promise</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-keyword)">try</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                                </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> itemPromise</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>thrower</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> identity</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span> </span><span class="token" style="color:var(--code-token-keyword)">catch</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>e</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                                </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> e</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> </span><span class="token" style="color:var(--code-token-constant)">C</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">all</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>promises</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">errors</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                        </span><span class="token" style="color:var(--code-token-keyword)">throw</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">AggregateError</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>errors</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;Every promise rejected&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>                </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> identity</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/Promise/any/polyfill.js" class="link-_707cf  link_3b154 inline-link_3b154">https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/Promise/any/polyfill.js</a></p>
<h2 id="使用polyfill" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#使用polyfill">#</a>使用polyfill</h2>
<p class="my-4 leading-7">使用polyfill总的来说，有两种方式：手动和自动。</p>
<h3 id="手动polyfill" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#手动polyfill">#</a>手动polyfill</h3>
<p class="my-4 leading-7">以Object#assign为例，这类常用函数在IE11等旧浏览器上也会报错，但是有些库已经进行了实现，我们就能够借助这些库进行手动polyfill。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>Object</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>assign </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;object-assign&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// or</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// Refer: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">typeof</span><span> Object</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>assign </span><span class="token operator">!=</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;function&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">// Must be writable: true, enumerable: false, configurable: true</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  Object</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">defineProperty</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>Object</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;assign&quot;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token function-variable" style="color:var(--code-token-function)">value</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-function)">assign</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">target</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> varArgs</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token" style="color:var(--code-token-comment)">// .length of function is 2</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-string)">&#x27;use strict&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>target </span><span class="token operator">==</span><span> </span><span class="token" style="color:var(--code-token-keyword)">null</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token" style="color:var(--code-token-comment)">// TypeError if undefined or null</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">throw</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">TypeError</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;Cannot convert undefined or null to object&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> to </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Object</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>target</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">for</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">var</span><span> index </span><span class="token operator">=</span><span> </span><span class="token number">1</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> index </span><span class="token operator">&lt;</span><span> arguments</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>length</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> index</span><span class="token operator">++</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> nextSource </span><span class="token operator">=</span><span> arguments</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>index</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>nextSource </span><span class="token operator">!=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">null</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token" style="color:var(--code-token-comment)">// Skip over if undefined or null</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token" style="color:var(--code-token-keyword)">for</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">var</span><span> nextKey </span><span class="token" style="color:var(--code-token-keyword)">in</span><span> nextSource</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>            </span><span class="token" style="color:var(--code-token-comment)">// Avoid bugs when hasOwnProperty is shadowed</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>            </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token class-name">Object</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>prototype</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">hasOwnProperty</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">call</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>nextSource</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> nextKey</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>              to</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>nextKey</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span> </span><span class="token operator">=</span><span> nextSource</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>nextKey</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>            </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>          </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> to</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">writable</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">configurable</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">优势是能够保证最先依赖引入。缺点是不便维护和管理，无法适应多端和复杂的浏览器环境。</p>
<h3 id="自动polyfill" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#自动polyfill">#</a>自动polyfill</h3>
<p class="my-4 leading-7">借助webpack的babel插件，可以实现根据代码自动polyfill。主要由以下插件和库可以实现该能力<code>@babel/preset-env</code>、 <code>@babel/plugin-transform-runtime</code>、 <code>core-js</code>、<code>@babel/polyfill</code>。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>@babel/preset-env</code> - 按需编译和按需打补丁</li>
</ol>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7"><code>@babel/preset-env</code> is a smart preset that allows you to use the latest JavaScript without needing to micromanage
which syntax transforms (and optionally, browser polyfills) are needed by your target environment(s). This both makes
your life easier and JavaScript bundles smaller!</p>
</blockquote>
<p class="my-4 leading-7">翻译过来就是 <code>@babel/preset-env</code> 会根据目标环境来进行编译和打补丁。具体来讲，是根据参数 <code>targets</code> 来确定目标环境，
默认情况下它编译为ES2015，可以根据项目需求进行配置：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>     </span><span class="token literal-property" style="color:var(--code-token-parameter)">presets</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>       </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>         </span><span class="token" style="color:var(--code-token-string)">&#x27;@babel/preset-env&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>         </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>           </span><span class="token" style="color:var(--code-token-comment)">// 支持chrome 58+ 及 IE 11+</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>           </span><span class="token literal-property" style="color:var(--code-token-parameter)">targets</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>             </span><span class="token literal-property" style="color:var(--code-token-parameter)">chrome</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;58&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>             </span><span class="token literal-property" style="color:var(--code-token-parameter)">ie</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;11&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>           </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>         </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>       </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>     </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// ...</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">具体 targets 参数可参见 <a target="_blank" rel="noopener noreferrer" href="https://github.com/browserslist/browserslist" class="link-_707cf  link_3b154 inline-link_3b154">browserlist</a>。</p>
<ol start="2" class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>core-js</code> JavaScript 标准库</li>
</ol>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://github.com/zloirock/core-js" class="link-_707cf  link_3b154 inline-link_3b154">core-js</a> 是实现 JavaScript 标准运行库之一，它提供了从ES3～ES7+ 以及还处在提案阶段的 JavaScript 的实现。</p>
<ol start="3" class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>@babel/plugin-transform-runtime</code> - 重利用 Babel helper 方法的babel插件</li>
</ol>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">A plugin that enables the re-use of Babel&#x27;s injected helper code to save on codesize.</p>
</blockquote>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://babeljs.io/docs/en/babel-plugin-transform-runtime" class="link-_707cf  link_3b154 inline-link_3b154">@babel/plugin-transform-runtime</a> 是对 Babel 编译过程中产生的 helper 方法进行重新利用(聚合)，以达到减少打包体积的目的。
此外还有个作用是为了避免全局补丁污染，对打包过的 bundler 提供&quot;沙箱&quot;式的补丁。</p>
<ol start="4" class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>@babel/polyfill</code> - core-js 和 regenerator-runtime 补丁的实现库</li>
</ol>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">Babel includes a <a target="_blank" rel="noopener noreferrer" href="https://en.wikipedia.org/wiki/Polyfill_(programming)" class="link-_707cf  link_3b154 inline-link_3b154">polyfill</a> that includes a custom
<a target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js" class="link-_707cf  link_3b154 inline-link_3b154">regenerator runtime</a>
and <a target="_blank" rel="noopener noreferrer" href="https://github.com/zloirock/core-js" class="link-_707cf  link_3b154 inline-link_3b154">https://github.com/zloirock/core-js</a>.<br/>
This will emulate a full ES2015+ environment (no &lt; Stage 4 proposals) and is intended to be used in an application
rather than a library/tool. (this polyfill is automatically loaded when using babel-node)</p>
</blockquote>
<p class="my-4 leading-7"><code>@babel/polyfill</code> 通过定制 <code>polyfill</code> 和 <code>regenerator</code>，提供了一个ES2015+ 环境 polyfill的库。因为它是由其他两个库实现的，
直接引入其他两个库即可，所以已被废弃。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// 实现 @babel/polyfill 等同效果</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;core-js/stable&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">import</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;regenerator-runtime/runtime&#x27;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">通过插件的方式，能够分析代码中使用的函数，根据浏览器覆盖率动态的生成polyfill进行加载，使得polyfill的体积和功能达到了一个平衡。</p>
<h2 id="动态polyfill" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#动态polyfill">#</a>动态polyfill</h2>
<p class="my-4 leading-7">以上的polyfill方案，无法避免的问题就是冗余。如果用户的浏览器环境本身就支持，就无需加载某个/些polyfill方法。</p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://polyfill.io/" class="link-_707cf  link_3b154 inline-link_3b154">Polyfill.io</a> 就是实现这个方案的服务，它会根据浏览器的UA不同，返回不一样的补丁。如想要 <code>Promise</code> 补丁，在页面引入：</p>
<div class="language-html"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-html" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-punctuation)">&lt;</span><span class="token" style="color:var(--code-token-function)">script</span><span class="token" style="color:var(--code-token-function)"> </span><span class="token" style="color:var(--code-token-symbol)">src</span><span class="token attr-equals" style="color:var(--code-token-punctuation)">=</span><span class="token" style="color:var(--code-token-punctuation)">&quot;</span><span class="token" style="color:var(--code-token-string-expression)">https://polyfill.io/v3/polyfill.js?features=Promise</span><span class="token" style="color:var(--code-token-punctuation)">&quot;</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span><span class="token" style="color:var(--code-token-punctuation)">&lt;/</span><span class="token" style="color:var(--code-token-function)">script</span><span class="token" style="color:var(--code-token-punctuation)">&gt;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">如在高版本的浏览器(Chrome 75)上，打开链接会返回空页面：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">/* Polyfill service v3.111.0
</span></span><span style="display:block;padding:0 1.25rem;color:var(--code-token-comment)" class="token"> * For detailed credits and licence information see https://github.com/financial-times/polyfill-service.
</span><span style="display:block;padding:0 1.25rem;color:var(--code-token-comment)" class="token"> * 
</span><span style="display:block;padding:0 1.25rem;color:var(--code-token-comment)" class="token"> * Features requested: Promise
</span><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"> *  */</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">/* No polyfills needed for current settings and browser */</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">如果将浏览器的UA改为IE 11，将会返回相应的 <code>polyfill</code>:</p>
<p class="my-4 leading-7"><img alt="polyfill.io" src="/static/image/polyfill-io.3760d17d.png"/></p>
<p class="my-4 leading-7">还可以附加查询参数来定制Polyfill，具体可参照<a target="_blank" rel="noopener noreferrer" href="https://polyfill.io/v3/url-builder/" class="link-_707cf  link_3b154 inline-link_3b154">官方文档</a>。</p>
<p class="my-4 leading-7">此外，如果对 <a target="_blank" rel="noopener noreferrer" href="http://polyfill.io" class="link-_707cf  link_3b154 inline-link_3b154">http://polyfill.io</a> 的稳定性和安全性有要求，可以根据开源的 <a target="_blank" rel="noopener noreferrer" href="https://github.com/Financial-Times/polyfill-service" class="link-_707cf  link_3b154 inline-link_3b154">polyfill service</a> 搭建自己的服务，然后部署到 CDN 上。</p>
<h2 id="动态polyfill优化" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#动态polyfill优化">#</a>动态polyfill优化</h2>
<p class="my-4 leading-7">动态polyfill听起来很美好，但是也存在一些问题。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">为了提供动态的特性，一个远端服务的支持。远端服务需要根据请求ua动态生成js文件。动态生成存在计算的过程，对服务的稳定性要求比较高。</li>
<li class="[&amp;:not(:first-child)]:mt-2">作为一个JS基础库，另一个考虑的因素就是访问和加载速度。免不了需要CDN的支持，但是ua的组合多种多样，使用CDN缓存会有庞大的成本问题。</li>
</ol>
<p class="my-4 leading-7">如果平台所处的环境相对固定，就可以对polyfill进一步优化。借助埋点提供的浏览器环境数据，按照webview版本将polyfill拆分成固定的几个版本，在不同的版本阶段加载不同的polyfill。</p>
<h3 id="基于线上版本分布的polyfill优化" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#基于线上版本分布的polyfill优化">#</a>基于线上版本分布的polyfill优化</h3>
<p class="my-4 leading-7">从 sentry 上查看浏览器的版本分布</p>
<p class="my-4 leading-7"><img alt="Sentry issue browser" src="/static/image/sentry-issue-browser.adf865fd.png"/></p>
<p class="my-4 leading-7">可以看到出现频率最常见的两个版本是 <code>66.0.3369</code> 和 <code>56.0.2924</code> ，这里准备了这两个环境的UA字符串：</p>
<div class="language-text"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-text" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>Mozilla/5.0 (Linux; Android 6.0.1; MiTV4A Build/MHC19J; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.158 Mobile Safari/537.36 MITV/94
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">Mozilla/5.0 (Linux; Android 6.0; MiTV4-MTSM0 Build/MRA58K; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/56.0.2924.87 Mobile Safari/537.36 MITV/94</span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">以将特性polyfill到es2015为例，<a target="_blank" rel="noopener noreferrer" href="https://polyfill.io/v3/polyfill.js?features=es2015" class="link-_707cf  link_3b154 inline-link_3b154">https://polyfill.io/v3/polyfill.js?features=es2015</a> ，我们只需要准备三个版本的polyfill文件即可。</p>
<p class="my-4 leading-7"><img alt="Webview Version" src="data:image/png;base64,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"/></p>
<p class="my-4 leading-7">高于66的只polyfill Array.prototype.sort函数，在56-66之间的使用Array.prototype.sort和Array.prototype.values，其余的引用全量的polyfill。</p>
<p class="my-4 leading-7">相比全量和动态的polyfill，该方案能有效降低polyfill存储和传输的成本。</p>
<h3 id="基于固定版本的polyfill优化" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#基于固定版本的polyfill优化">#</a>基于固定版本的polyfill优化</h3>
<p class="my-4 leading-7">我们的服务如果可以定制化或者自带webview控件，就可以将WebView的版本进行锁定到固定版本。由此进一步缩小浏览器之间的内核和版本差异，达到版本分布可控的状态。</p>
<p class="my-4 leading-7">在版本可控的情况下，可以将当前WebView版本专有的polyfill文件缓存到系统本地，通过本地文件加载的方式进一步优化传输速度。</p>
<h2 id="总结" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#总结">#</a>总结</h2>
<p class="my-4 leading-7">polyfill是为了解决浏览器版本差异而出现的一种补丁措施。随着对性能和体验要求的提升，动态polyfill剔除了没必要的补丁，
使更多函数能够调用浏览器原生的函数实现。在变量中寻找不变量，对非必要变量进行剪枝，是动态polyfill优化的一个方向。</p><!--/$--></div><div class="rspress-doc-footer"><div class="postFooter_2e2af flex flex-col"><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_edac1 flex flex-col"><a class="link_03735 pagerLink_edac1 cursor-pointer" target="" href="/2022/08/05/xiaomi-tv-6095-port-http-api/index.html"><span class="desc_edac1">上一篇</span><span class="title_edac1">小米电视 6095 端口 HTTP API 整理</span></a></div><div class="next_edac1 flex flex-col"><a class="link_03735 pagerLink_edac1 next_edac1 cursor-pointer" target="" href="/2022/08/16/bfs-dfs-search-template/index.html"><span class="desc_edac1">下一篇</span><span class="title_edac1">深度广度优先搜索</span></a></div></div></div><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"><div class="flex text-sm text-text-2 leading-6 sm:leading-8 font-medium"><p>最后编辑时间<!-- -->: <span>2024/2/12 18:55:54</span></p></div></div><div class="flex flex-col"><a href="https://github.com/sumy7/SumyBlog-rspress/blob/main/source/../source/_posts/2022-08-12-research-on-dynamic-polyfill-solutions/2022-08-12-research-on-dynamic-polyfill-solutions.md" target="_blank" class="editLink_2a169">📝 在 GitHub 上编辑此页</a></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"></div><div class="next_e7091 flex flex-col"></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div></div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">目录</div><nav class="mt-1"><ul class="relative"><li><a href="#什么是polyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">什么是polyfill</span></a></li><li><a href="#抹平不同浏览器的api差异" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">抹平不同浏览器的API差异</span></a></li><li><a href="#使用polyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">使用polyfill</span></a></li><li><a href="#手动polyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">手动polyfill</span></a></li><li><a href="#自动polyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">自动polyfill</span></a></li><li><a href="#动态polyfill" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">动态polyfill</span></a></li><li><a href="#动态polyfill优化" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">动态polyfill优化</span></a></li><li><a href="#基于线上版本分布的polyfill优化" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">基于线上版本分布的polyfill优化</span></a></li><li><a href="#基于固定版本的polyfill优化" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">基于固定版本的polyfill优化</span></a></li><li><a href="#总结" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">总结</span></a></li></ul></nav></div></div></div></div></div></div></div></section><footer class="mt-6 py-8 px-6 sm:p-8 w-full border-t border-solid border-divider-light"><div class="m-auto w-full text-center"><div class="font-meduim text-sm text-text-2">© 2015-<!-- -->2024<!-- --> SumyBlog. Powered by<!-- --> <a href="https://rspress.dev/" target="_blank" rel="noreferrer">Rspress</a>.</div></div></footer></div></div></div><div id="search-container"></div></body></html>