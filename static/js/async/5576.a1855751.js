/*! For license information please see 5576.a1855751.js.LICENSE.txt */
(self.webpackChunk_sumyblog_rspress_blog=self.webpackChunk_sumyblog_rspress_blog||[]).push([["5576"],{71468:function(e,n,r){"use strict";r.r(n);var s=r("35250"),o=r("51325");function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",strong:"strong",em:"em",h2:"h2",pre:"pre",code:"code",del:"del",ul:"ul",li:"li"},(0,o.useMDXComponents)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"\u4F7F\u7528pythonmongodbnodejs\u5B9E\u73B0\u4E00\u4E2A\u7968\u6570\u8BB0\u5F55\u7F51\u7AD9",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528pythonmongodbnodejs\u5B9E\u73B0\u4E00\u4E2A\u7968\u6570\u8BB0\u5F55\u7F51\u7AD9",children:"#"}),"\u4F7F\u7528Python+Mongodb+NodeJS\u5B9E\u73B0\u4E00\u4E2A\u7968\u6570\u8BB0\u5F55\u7F51\u7AD9"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4E4B\u524D\u5237\u5FAE\u535A\u7684\u65F6\u5019\u770B\u8FC7\u4E00\u4E2A\u7F51\u7AD9",(0,s.jsx)(n.a,{href:"http://steamtuhao.com/",target:"_blank",rel:"noopener noreferrer",children:"\u4E70\u4E0B Steam \u6240\u6709\u6E38\u620F\u8981\u82B1\u591A\u5C11\u94B1\uFF1F"}),"\uFF0C\u53D1\u73B0\u5B83\u7684\u5B9E\u73B0\u4F7F\u7528\u7684\u662F ",(0,s.jsx)(n.strong,{children:"Python\u540E\u53F0"})," \u52A0 ",(0,s.jsx)(n.strong,{children:"NodeJS\u5C55\u793A"})," \u3002\u524D\u51E0\u5929 ",(0,s.jsx)(n.em,{children:"\u5929\u4E8C"})," \u53D1\u6765\u4E86\u4E00\u4E2A\u6295\u7968\u7F51\u7AD9\uFF0C\u5728\u7814\u7A76\u4E86\u4E00\u756A\u4E4B\u540E\u627E\u5230\u4E86\u5237\u7968\u7684\u65B9\u6CD5\u3002\u518D\u52A0\u4E0A\u60F3\u7528NodeJS\u5E72\u70B9\u4E8B\u60C5\uFF0C\u4E8E\u662F\u5728\u8FD9\u4E9B\u4E71\u4E03\u516B\u7CDF\u7684\u4E8B\u60C5\u7684\u9A71\u52A8\u4E0B\uFF0C\u8FD9\u4E2A\u7F51\u7AD9\u7684\u60F3\u6CD5\u5C31\u8FD9\u6837\u8BDE\u751F\u7684\u3002NodeJS\u548CMongodb\u90FD\u662F\u73B0\u5B66\u73B0\u5356\u7684\uFF0C\u81F3\u5C11\u80FD\u8FBE\u5230\u9884\u671F\u7684\u6548\u679C\u4E86\u3002"]}),"\n",(0,s.jsxs)(n.h2,{id:"\u6570\u636E\u6E90\u7F51\u7AD9\u5206\u6790",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6570\u636E\u6E90\u7F51\u7AD9\u5206\u6790",children:"#"}),"\u6570\u636E\u6E90\u7F51\u7AD9\u5206\u6790"]}),"\n",(0,s.jsx)(n.p,{children:"\u7531\u4E8E\u6D3B\u52A8\u8981\u52305\u6708\u4EFD\u624D\u7ED3\u675F\uFF0C\u4E3A\u4E86\u4E0D\u5FC5\u8981\u7684\u9EBB\u70E6\uFF0C\u5C31\u4E0D\u6253\u7B97\u66B4\u9732\u7F51\u5740\u4E86\u3002\u4E5F\u8BF7\u81EA\u884C\u8111\u8865\u4E00\u4E9B\u56FE\u7247\u5427\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u6700\u521D\u6295\u7968\u7F51\u7AD9\u662F\u5206\u4EAB\u5230\u670B\u53CB\u5708\u7684\uFF0C\u901A\u8FC7\u5206\u4EAB\u7684\u94FE\u63A5\u8BBF\u95EE\u6295\u7968\u9009\u624B\u7F51\u9875\uFF0C\u70B9\u51FB\u201C\u6295\u7968\u201D\u5C31\u4E3A\u8BE5\u9009\u624B\u6295\u4E0A\u4E00\u7968\uFF0C\u591A\u6B21\u6295\u7968\u53EA\u80FD\u7B97\u4E00\u7968\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u4E3A\u4E86\u8C03\u8BD5\u65B9\u4FBF\uFF0C\u5C06\u94FE\u63A5\u63D0\u53D6\u5230\u7535\u8111\u6D4F\u89C8\u5668\u4E0A\uFF0C\u5374\u63D0\u793A ",(0,s.jsx)(n.strong,{children:"\u9700\u8981\u5728\u5FAE\u4FE1\u4E2D\u6253\u5F00"}),"\uFF0C\u6700\u521D\u60F3\u5230\u662F\u4E0D\u662F\u5224\u65AD\u7684UserAgent\uFF0C\u4E8E\u662F\u627E\u4E86\u4E00\u4E2AAndroid\u5FAE\u4FE1\u6D4F\u89C8\u5668\u7684UserAgent\u8BD5\u4E86\u4E00\u4E0B\uFF0C\u53D1\u73B0\u4E0D\u884C\u3002\u8FD9\u5C31\u7EA0\u7ED3\u4E86\uFF0C\u7136\u540E\u5929\u4E8C\u544A\u8BC9\u8BF4\u7528iPhone\u7684UserAgent\u662F\u53EF\u4EE5\u7684\uFF0C\u8FD9...\u65E0\u8BED\u4E86..."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{meta:"",children:"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12A365   MicroMessenger/5.4.1 NetType/WIFI\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6253\u5F00\u7F51\u9875\u4E4B\u540E\uFF0C\u9700\u8981\u7814\u7A76\u6295\u7968\u903B\u8F91\u3002\u7B80\u5355\u770B\u4E86JS\u4EE3\u7801\u4E4B\u540E\uFF0C\u53D1\u73B0\u6295\u7968\u6309\u94AE\u6839\u672C\u5565\u4E8B\u60C5\u4E5F\u6CA1\u6709\u505A\uFF0C\u90A3\u7968\u662F\u600E\u4E48\u6295\u4E0A\u53BB\u7684\uFF1F\u7ECF\u8FC7\u4E00\u7CFB\u5217\u7684\u731C\u60F3\u548C\u5B9E\u9A8C\u4E4B\u540E\uFF0C\u53D1\u73B0\u4E86\u4E00\u4E2A\u60CA\u5929\u7684\u7ED3\u8BBA\uFF1A\u7F51\u9875\u901A\u8FC7Cookie\u5224\u65AD\u662F\u5426\u591A\u6B21\u6295\u7968\uFF0C\u800C\u6295\u7968\u53EA\u9700\u8BBF\u95EE\u4E00\u4E0B\u7F51\u9875\u5C31\u53EF\u4EE5\u4E86...\u5C31\u53EF\u4EE5\u4E86...\u5C31\u53EF\u4EE5\u4E86..."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.del,{children:"\u5929\u4E8C\u8BF4\uFF0C\u597D\u60F3\u53BB\u521B\u4E1A\u5440..."})}),"\n",(0,s.jsxs)(n.h2,{id:"python\u6293\u53D6\u6570\u636E",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#python\u6293\u53D6\u6570\u636E",children:"#"}),"Python\u6293\u53D6\u6570\u636E"]}),"\n",(0,s.jsx)(n.p,{children:"\u4E5F\u597D\u4E5F\u597D\uFF0C\u7F51\u7AD9\u7B80\u5355\u7A0B\u5E8F\u4E5F\u5C31\u7B80\u5355\u4E86\u3002\u4E00\u6BB5\u6295\u7968+\u6293\u53D6\u6570\u636E\u7684\u4EE3\u7801\u5C31\u8FD9\u6837\u8BDE\u751F\u4E86\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",meta:"",children:"import urllib2\n\nurl = 'http://balabala.com' # \u6570\u636E\u6E90\u7F51\u5740\nuseragent = 'Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12A365   MicroMessenger/5.4.1 NetType/WIFI'\nrequest = urllib2.Request(url)\nrequest.add_header('User-Agent', useragent) # \u8BBE\u7F6EUserAgent\nreader = urllib2.urlopen(request)\nhtml = reader.read().decode('gbk')\nprint html # \u6253\u5370\u7F51\u9875\u6E90\u4EE3\u7801\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7F51\u9875\u6E90\u4EE3\u7801\u6293\u53D6\u5230\u4E86\uFF0C\u9700\u8981\u5206\u6790\u6E90\u4EE3\u7801\u7684\u6570\u636E\u3002\u8FD9\u91CC\u4E3B\u8981\u6293\u53D6\u7F51\u9875\u91CC\u7684\u6392\u884C\u699C\uFF0C\u6392\u884C\u699C\u5728\u4E00\u4E2A ",(0,s.jsx)(n.code,{children:"table"})," \u4E2D\u663E\u793A\uFF0C\u800C\u6574\u4E2A\u7F51\u9875\u53EA\u6709\u4E00\u4E2Atable\u3002\u4F7F\u7528Python\u7684",(0,s.jsx)(n.code,{children:"HTMLParser"}),"\u5E93\u89E3\u6790\u7F51\u9875\u6E90\u4EE3\u7801\u3002\u4E0B\u9762\u7ED9\u51FA\u4E00\u4E2A\u5927\u81F4\u6846\u67B6\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",meta:"",children:"from  HTMLParser import HTMLParser\n\nclass MyHTMLParser(HTMLParser):\n    def __init__(self):\n        HTMLParser.__init__(self)\n        self.tag = None\n\n    def handle_starttag(self, tag, attrs):\n        if tag == 'td':\n            self.tag = 'td'\n\n    def handle_endtag(self, tag):\n        if self.tag == 'td':\n            ... # \u6807\u7B7E\u95ED\u5408\u65F6\u5904\u7406\u4FDD\u5B58\u6570\u636E\n        self.tag = None\n\n    def handle_data(self, data):\n        if self.tag == 'td':\n            ... # \u4E34\u65F6\u8BB0\u5F55\u6570\u636E\n            print data\n\n... #\u7701\u7565\u6293\u53D6\u4EE3\u7801\nparser = MyHTMLParser()\nparser.feed(html)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7136\u540E\u5C31\u662F\u5B9A\u65F6\u4EFB\u52A1\u4E86\uFF0C\u4E0D\u60F3\u4F7F\u7528\u65E0\u9650\u5FAA\u73AF\uFF0C\u5C31\u53C2\u8003\u4F7F\u7528",(0,s.jsx)(n.code,{children:"crontab"}),"\u6765\u6267\u884C\u5B9A\u65F6\u4EFB\u52A1\u3002\u6267\u884C\u5E76\u5728\u6700\u540E\u4E00\u884C\u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{meta:"",children:"$ crontab -e\n*/20 * * * * python main.py\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u8FD9\u53E5\u8BDD\u7684\u610F\u601D\u662F ",(0,s.jsx)(n.strong,{children:"\u6BCF\u969420\u5206\u949F\u6267\u884C\u4E00\u6B21\u540E\u9762\u7684\u547D\u4EE4"}),"\uFF0C\u5176\u5B83\u5199\u6CD5\u53EF\u4EE5\u67E5\u9605\u76F8\u5173\u8D44\u6599\u3002\u8C8C\u4F3C\u540E\u53F0\u6570\u636E\u7AEF\u51C6\u5907\u5B8C\u6BD5\u4E86\u3002"]}),"\n",(0,s.jsxs)(n.h2,{id:"mongodb\u6570\u636E\u5E93\u6784\u5EFA",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mongodb\u6570\u636E\u5E93\u6784\u5EFA",children:"#"}),"Mongodb\u6570\u636E\u5E93\u6784\u5EFA"]}),"\n",(0,s.jsx)(n.p,{children:"\u9009\u62E9Mongodb\u7684\u539F\u56E0\u6709\u4E24\u4E2A\uFF1A\u4E00\u662F\u4E0D\u60F3\u7528MySql\u4E86\uFF0C\u4E8C\u662F\u6CA1\u7528\u8FC7Mongodb\u3002\u9996\u5148\u679C\u7136\u8FD8\u662F\u4ECE\u5B89\u88C5\u642D\u914D\u73AF\u5883\u5F00\u59CB\u5427\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["Windows\u4E0B\u5B89\u88C5\uFF0C\u9996\u5148\u5230",(0,s.jsx)(n.a,{href:"https://www.mongodb.org/downloads",target:"_blank",rel:"noopener noreferrer",children:"https://www.mongodb.org/downloads"}),"\u6765\u4E0B\u8F7D\u5B89\u88C5\u5305\uFF0C\u5B89\u88C5\u4E4B\u540E\u627E\u5230\u5B89\u88C5\u76EE\u5F55\uFF0C\u8FD0\u884C\u547D\u4EE4 ",(0,s.jsx)(n.code,{children:'mongod --dbpath "\u6570\u636E\u5E93\u8DEF\u5F84" --logpath "\u65E5\u5FD7\u8DEF\u5F84\\MongoDB.log" --install --serviceName "MongoDB"'}),"\uFF0C\u8FD9\u6837\u4F1A\u4EE5\u670D\u52A1\u6A21\u5F0F\u8FD0\u884CMongodb\u6570\u636E\u5E93\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["Linux\u4E0B\u5B89\u88C5\uFF0C\u4E5F\u9700\u8981\u5230",(0,s.jsx)(n.a,{href:"https://www.mongodb.org/downloads",target:"_blank",rel:"noopener noreferrer",children:"https://www.mongodb.org/downloads"}),"\u6765\u4E0B\u8F7D\u5B89\u88C5\u5305\uFF0C\u89E3\u538B\u5230",(0,s.jsx)(n.code,{children:"\\usr\\local\\mongodb"}),"\u76EE\u5F55\u4E0B\uFF0C\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6mongodb.conf\uFF0C\u914D\u7F6E\u5F00\u673A\u542F\u52A8\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"mongodb.conf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{meta:"",children:"dbpath=/usr/local/mongodb/db\nlogpath=/usr/local/mongodb/logs/mongodb.log\nport=27017\nfork=true\nnohttpinterface=true\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u914D\u7F6E\u5F00\u673A\u542F\u52A8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{meta:"",children:"vi /etc/rc.d/rc.local\n/usr/local/mongodb/bin/mongod --config /usr/local/mongodb/bin/mongodb.conf\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Python\u53EF\u4EE5\u4F7F\u7528",(0,s.jsx)(n.code,{children:"pymongo"}),"\u6765\u8FDE\u63A5Mongodb\u6570\u636E\u5E93\uFF0CWindows\u4E0B\u53EF\u4EE5\u4E0B\u8F7D\u6A21\u5757\u5B89\u88C5\u5305\uFF0CLinux\u4E0B\u7528",(0,s.jsx)(n.code,{children:"pip"}),"\u5B89\u88C5\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",meta:"",children:"import pymongo\nimport random\n\nconn = pymongo.Connection(\"127.0.0.1\",27017)\ndb = conn.test # \u8FDE\u63A5\u5E93\ndb.user.save({'id':1,'name':'kaka','sex':'male'}) # \u63D2\u5165\u4E00\u4E2A\u6570\u636E\n"})}),"\n",(0,s.jsxs)(n.p,{children:["NodeJS\u9700\u8981",(0,s.jsx)(n.code,{children:"mongodb"}),"\u548C",(0,s.jsx)(n.code,{children:"monk"}),"\u6A21\u5757\u8FDE\u63A5Mongodb\u6570\u636E\u5E93\uFF0C\u4F7F\u7528",(0,s.jsx)(n.code,{children:"npm"}),"\u5B89\u88C5\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",meta:"",children:"var mongo = require('mongodb');\nvar monk = require('monk');\nvar db = monk('localhost:27017/test');\n\nvar collection = db.get('user');\ncollection.find({}, {}, function (e, timedocs) {\n    ...\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8FD9\u91CC\u7B80\u5355\u4ECB\u7ECD\u4E86Mongodb\u7684\u5B89\u88C5\u548C\u8FDE\u63A5\u65B9\u5F0F\u3002"}),"\n",(0,s.jsxs)(n.h2,{id:"nodejs\u5C55\u793A",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nodejs\u5C55\u793A",children:"#"}),"NodeJS\u5C55\u793A"]}),"\n",(0,s.jsx)(n.p,{children:"\u6709\u4E86\u6570\u636E\u548C\u6570\u636E\u5E93\uFF0C\u5C31\u9700\u8981\u4E00\u4E2A\u5C55\u793A\u9875\u9762\u4E86\u3002\u6846\u67B6\u9009\u5B9A\u4E86Express\uFF0C\u7B2C\u4E00\u6B21\u7528\u8BF4\u4E00\u4E0B\u4E86\u89E3\u7684\u5730\u65B9\u3002"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5B89\u88C5"})," \u9700\u8981\u5B89\u88C5",(0,s.jsx)(n.code,{children:"node"}),"\u548C",(0,s.jsx)(n.code,{children:"npm"}),"\uFF0C\u4E00\u822C\u53D1\u884C\u7248\u7684\u8F6F\u4EF6\u5E93\u4E2D\u90FD\u5305\u542B\u5427\uFF0C\u624B\u52A8\u5B89\u88C5\u53BB\u627E\u6446\u6E21\u5427\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6846\u67B6"})," \u5982\u679C\u6709\u4E2AIDE\u90A3\u5C31\u518D\u597D\u4E0D\u8FC7\u4E86\uFF0C\u4E5F\u53EF\u4EE5\u624B\u52A8\u4E0B\u8F7DExpress\u3002\u5177\u4F53\u600E\u4E48\u5B89\u88C5\u8FD8\u662F\u770B\u4E2A\u4EBA\u559C\u597D\u5427\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8DEF\u7531"})," \u7B2C\u4E00\u6B21\u63A5\u89E6\u8FD9\u79CD\u9700\u8981\u624B\u52A8\u4E66\u5199\u8DEF\u7531\u89C4\u5219\u7684\u65B9\u5F0F\u3002Express\u7684\u8DEF\u7531\u89C4\u5219\u5206\u4E3A\u4E24\u90E8\u5206\uFF0C",(0,s.jsx)(n.code,{children:"app.js"}),"\u548C",(0,s.jsx)(n.code,{children:"routes"}),"\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u3002\u9996\u5148\u5728",(0,s.jsx)(n.code,{children:"app.js"}),"\u4E2D\u6307\u5B9A\u54EA\u4E2A\u76EE\u5F55\u7531\u54EA\u4E2A\u8DEF\u7531\u89E3\u6790\uFF0C\u7136\u540E\u5728",(0,s.jsx)(n.code,{children:"routes"}),"\u4E0B\u914D\u7F6E\u76F8\u5E94\u7684\u8DEF\u7531\u6587\u4EF6\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6570\u636E\u5E93"})," \u6570\u636E\u5E93\u6700\u597D\u662F\u7EF4\u6301\u4E00\u4E2A\u8FDE\u63A5\uFF0C\u800C\u4E0D\u662F\u6BCF\u6709\u4E00\u4E2A\u8BF7\u6C42\u5230\u6765\u5C31\u5EFA\u7ACB\u4E00\u4E2A\u8FDE\u63A5\u3002\u5B9E\u73B0\u7684\u65B9\u5F0F\u662F\u5728",(0,s.jsx)(n.code,{children:"app.js"}),"\u4E2D\u5EFA\u7ACB\u8FDE\u63A5\uFF0C\u7136\u540E\u5728routes\u4E2D\u5F15\u7528\u8FD9\u4E2A\u6570\u636E\u5E93\u8FDE\u63A5\u3002\u8FD9\u91CC\u8D34\u51FA\u4E00\u4E2A",(0,s.jsx)(n.code,{children:"app.js"}),"\u7684\u4EE3\u7801\uFF0C\u53EF\u4EE5\u53C2\u8003\u8FD9\u6BB5\u4EE3\u7801\u7684\u6CE8\u91CA\u3002\u5728\u8DEF\u7531\u4E2D\u901A\u8FC7",(0,s.jsx)(n.code,{children:"req.db"}),"\u5C31\u53EF\u4EE5\u53D6\u5230\u6570\u636E\u5E93\u5F15\u7528\u4E86\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",meta:"",children:"var express = require('express');\nvar path = require('path');\nvar favicon = require('serve-favicon');\nvar logger = require('morgan');\nvar cookieParser = require('cookie-parser');\nvar bodyParser = require('body-parser');\n\n// \u6570\u636E\u5E93\u8FDE\u63A5\u653E\u5230\u8FD9\u91CC\nvar mongo = require('mongodb');\nvar monk = require('monk');\nvar db = monk('localhost:27017/nodetest1');\n\nvar routes = require('./routes/index');\nvar users = require('./routes/users');\n\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\n// uncomment after placing your favicon in /public\n//app.use(favicon(__dirname + '/public/favicon.ico'));\napp.use(logger('dev'));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\n// \u5C06db\u5206\u53D1\u5230router\u91CC\uFF0C\u6CE8\u610F\u653E\u5728'\\'\u8DEF\u7531\u7684\u524D\u9762\napp.use(function(req,res,next){\n    req.db = db;\n    next();\n});\n\napp.use('/', routes); // ---\u653E\u5728**\u8FD9**\u524D\u9762---\napp.use('/users', users);\n\n/// catch 404 and forwarding to error handler\napp.use(function(req, res, next) {\n    var err = new Error('Not Found');\n    err.status = 404;\n    next(err);\n});\n\n/// error handlers\n\n// development error handler\n// will print stacktrace\nif (app.get('env') === 'development') {\n    app.use(function(err, req, res, next) {\n        res.status(err.status || 500);\n        res.render('error', {\n            message: err.message,\n            error: err\n        });\n    });\n}\n\n// production error handler\n// no stacktraces leaked to user\napp.use(function(err, req, res, next) {\n    res.status(err.status || 500);\n    res.render('error', {\n        message: err.message,\n        error: {}\n    });\n});\n\nmodule.exports = app;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u542F\u52A8"})," \u5F00\u53D1\u73AF\u5883\u548C\u90E8\u7F72\u73AF\u5883\u7684\u8FD0\u884C\u662F\u4E0D\u540C\u7684\uFF0C\u90E8\u7F72\u73AF\u5883\u4E0B\u9700\u8981\u80FD\u5728\u540E\u53F0\u8FD0\u884C\u3002\u53EF\u4EE5\u5728\u7F51\u7AD9\u76EE\u5F55\u4E0B\u8FD0\u884C ",(0,s.jsx)(n.code,{children:"PORT=3000 nohup npm start &"})," \u547D\u4EE4\uFF0C",(0,s.jsx)(n.code,{children:"PORT"}),"\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u6765\u4FEE\u6539\u542F\u52A8\u7AEF\u53E3\uFF0C",(0,s.jsx)(n.code,{children:"nohop"}),"\u914D\u5408",(0,s.jsx)(n.code,{children:"&"}),"\u5B9E\u73B0\u540E\u53F0\u6267\u884C\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5176\u5B83"})," \u8BF8\u5982\u5982\u4F55\u4E66\u5199\u9875\u9762\uFF0C\u5982\u4F55\u4F20\u53C2\u6E32\u67D3\uFF0C\u8FD9\u4E9B\u95EE\u9898\u53EF\u4EE5\u53C2\u8003Express\u6846\u67B6\u91CC\u7684\u9ED8\u8BA4\u9875\u9762\u3002"]}),"\n",(0,s.jsxs)(n.h2,{id:"\u670D\u52A1\u5668\u548C\u57DF\u540D",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u670D\u52A1\u5668\u548C\u57DF\u540D",children:"#"}),"\u670D\u52A1\u5668\u548C\u57DF\u540D"]}),"\n",(0,s.jsxs)(n.p,{children:["\u670D\u52A1\u5668\u4F7F\u7528\u963F\u91CC\u4E91\u7684\u670D\u52A1\u5668\uFF0C\u5C06\u4EE5\u4E0A\u5185\u5BB9\u90E8\u7F72\u4E0A\u53BB\u4E4B\u540E\u6253\u7B97\u7ED1\u4E0A\u4E00\u4E2A\u57DF\u540D\uFF0C\u53C2\u8003 ",(0,s.jsx)(n.em,{children:"\u571F\u8C6A"})," \u90A3\u7BC7\u6587\u7AE0\uFF0C\u6253\u7B97\u5C31\u4F7F\u7528Nginx\u505A\u8F6C\u53D1\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5B89\u88C5Nginx\uFF0C\u6253\u5F00\u914D\u7F6E\u6587\u4EF6",(0,s.jsx)(n.code,{children:"vim /etc/nginx/nginx.conf"}),"\uFF0C\u6DFB\u52A0\u4E00\u6BB5\u5185\u5BB9\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{meta:"",children:"server {\n  listen 80;\n  server_name steamtuhao.com www.steamtuhao;    # \u2190\u5199\u4F60\u7684\u57DF\u540D\n\n  location / {\n    proxy_pass http://127.0.0.1:3000;    # \u2190\u5199\u4F60\u7684\u7AEF\u53E3\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection 'upgrade';\n    proxy_set_header Host $host;\n    proxy_cache_bypass $http_upgrade;\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6CE8\u610F\u57DF\u540D\u548C\u7AEF\u53E3\u3002\u7136\u540E\u91CD\u542FNginx ",(0,s.jsx)(n.code,{children:"service nginx restart"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u5F88\u987A\u5229\uFF0C\u4E0D\u8FC7\u9047\u5230\u4E86\u4E00\u4E2A\u95EE\u9898\uFF0C\u57DF\u540D\u9700\u8981\u5907\u6848\u3002\u7B97\u4E86\uFF0C\u8FD8\u662F\u4E56\u4E56\u7528IP\u8BBF\u95EE\u5427\u3002"}),"\n",(0,s.jsxs)(n.h2,{id:"\u603B\u7ED3",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u603B\u7ED3",children:"#"}),"\u603B\u7ED3"]}),"\n",(0,s.jsx)(n.p,{children:"\u8FD9\u6B21\u5B9E\u73B0\u8FC7\u7A0B\u7528\u4E86\u4E00\u5929\u591A\u7684\u65F6\u95F4\uFF0C\u5176\u5B9E\u4E3B\u8981\u7684\u65F6\u95F4\u90FD\u7528\u5728\u7814\u7A76\u56FE\u8868\u63D2\u4EF6\u7684\u5C55\u793A\u95EE\u9898\uFF0C\u8FD9\u91CC\u6CA1\u6709\u63D0\u5230\u8FD9\u90E8\u5206\u5185\u5BB9\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u6574\u4E2A\u5B9E\u73B0\u7684\u529F\u80FD\u5C31\u662F\uFF0CPython\u6BCF\u969420\u5206\u949F\u6293\u53D6\u4E00\u6B21\u6570\u636E\u5B58\u50A8\u5230Mongodb\u6570\u636E\u5E93\u4E2D\uFF0CExpress\u8BFB\u53D6Mongodb\u5C55\u793A\u51FA\u6765\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u81F3\u6B64\u8FD9\u90E8\u5206\u5185\u5BB9\u53EF\u4EE5\u544A\u4E00\u6BB5\u843D\u4E86\u3002"}),"\n",(0,s.jsxs)(n.h2,{id:"\u53C2\u8003\u5185\u5BB9",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u8003\u5185\u5BB9",children:"#"}),"\u53C2\u8003\u5185\u5BB9"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://www.cnblogs.com/kgdxpr/p/3519352.html",target:"_blank",rel:"noopener noreferrer",children:"CentOS6.4 \u5B89\u88C5MongoDB"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://cwbuecheler.com/web/tutorials/2013/node-express-mongo/",target:"_blank",rel:"noopener noreferrer",children:"THE DEAD-SIMPLE STEP-BY-STEP GUIDE FOR FRONT-END DEVELOPERS TO GETTING UP AND RUNNING WITH NODE.JS, EXPRESS, JADE, AND MONGODB"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://steamtuhao.com/",target:"_blank",rel:"noopener noreferrer",children:"\u4E70\u4E0B Steam \u6240\u6709\u6E38\u620F\u8981\u82B1\u591A\u5C11\u94B1\uFF1F"})}),"\n"]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.useMDXComponents)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(d,e)})):d(e)}n.default=a,a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["..%2Fsource%2F_posts%2F2016-02-29-a-vote-logger-with-python-mongodb-and-nodejs.md"]={toc:[{id:"\u6570\u636E\u6E90\u7F51\u7AD9\u5206\u6790",text:"\u6570\u636E\u6E90\u7F51\u7AD9\u5206\u6790",depth:2},{id:"python\u6293\u53D6\u6570\u636E",text:"Python\u6293\u53D6\u6570\u636E",depth:2},{id:"mongodb\u6570\u636E\u5E93\u6784\u5EFA",text:"Mongodb\u6570\u636E\u5E93\u6784\u5EFA",depth:2},{id:"nodejs\u5C55\u793A",text:"NodeJS\u5C55\u793A",depth:2},{id:"\u670D\u52A1\u5668\u548C\u57DF\u540D",text:"\u670D\u52A1\u5668\u548C\u57DF\u540D",depth:2},{id:"\u603B\u7ED3",text:"\u603B\u7ED3",depth:2},{id:"\u53C2\u8003\u5185\u5BB9",text:"\u53C2\u8003\u5185\u5BB9",depth:2}],title:"\u4F7F\u7528Python+Mongodb+NodeJS\u5B9E\u73B0\u4E00\u4E2A\u7968\u6570\u8BB0\u5F55\u7F51\u7AD9",frontmatter:{layout:"post",title:"\u4F7F\u7528Python+Mongodb+NodeJS\u5B9E\u73B0\u4E00\u4E2A\u7968\u6570\u8BB0\u5F55\u7F51\u7AD9",date:"2016-02-29 10:15:37",categories:["\u5B9E\u8DF5"],tags:["nodejs","mongodb","python"]}}}}]);